name: Greetings

on:
  push:
  pull_request:
  issues:

jobs:
  greet:
    runs-on: ubuntu-latest
    steps:
      - name: Greeting based on event
        uses: actions/github-script@v7
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          script: |
            const event = context.eventName;

            let message = "";

            if (event === "push") {
              message = "ðŸŽ‰ Hello! A new push was made. Great job committing your changes!";
              console.log(message);
              return; // STOP â€” no issue/PR to comment on
            }

            if (event === "pull_request") {
              message = "ðŸš€ Thanks for opening a Pull Request! We'll review it shortly.";
            } else if (event === "issues") {
              message = "ðŸ’¡ Thanks for opening an issue! Weâ€™ll look into it soon.";
            }

            const issueNumber =
              context.payload.pull_request?.number ||
              context.payload.issue?.number;

            if (!issueNumber) {
              console.log("No issue or PR number available to comment on.");
              return;
            }

            await github.rest.issues.createComment({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: issueNumber,
              body: message,
            });
